(this.webpackJsonphdc_app=this.webpackJsonphdc_app||[]).push([[45],{1413:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return _})),n.d(t,"c",(function(){return v}));var i,c,a,r,s,u,o=n(3),d=n(2),f=n(178),l=n(142),b=l.b,j=l.a,g=d.a.div(i||(i=Object(o.a)(["\n    font-size : 16px;\n    height : 48px;\n    width : 100%;\n    position : relative;\n    border-bottom : 1px solid #bfd2e2;\n"]))),O=d.a.div(c||(c=Object(o.a)(["\n    flex : 1;\n    width : 97%;\n    overflow-y : auto;\n    margin: 15px auto;\n    margin-bottom: 0;\n    background-color : #ffffff;\n    border : 1px solid #E5E5E5;\n"]))),p=d.a.div(a||(a=Object(o.a)(["\n    height : 8vw;\n    width : 97%;\n    margin-bottom : 10px;\n    display : flex;\n    justify-content : center;\n    align-items : center;\n    flex-direction : row;\n    gap : .5em;\n    padding : 10px 0 4px 0 ;\n"]))),_=d.a.div(r||(r=Object(o.a)(["\n    flex : 7;\n    background-color : #EFEFF0;\n    border : 1px solid #CCCCCC;\n    margin : 1% auto;\n    display : flex;\n    justify-content : flex-start;\n    align-items : center;\n    flex-direction : column;\n    padding-left : 10px;\n    height : 98%;\n    overflow : auto;\n    font-size : 14px;\n    img {\n        height : 2vh;\n        float : left;\n        margin-right : 5px;\n    }\n    a{\n        text-decoration : underline;\n    }\n    div{\n        width : 100%;\n        height : 3vh;\n        padding : .5vh 0;\n    }\n"]))),v=(d.a.dd(s||(s=Object(o.a)(["\n    button {\n        padding: 5px 15px;\n        border: 1px solid #ccc;\n    }\n"]))),Object(d.a)(f.a)(u||(u=Object(o.a)(["\n    height : 100%;\n    flex : 1;\n    padding: 8px 15px;\n    margin-left : 10px;\n    border-radius : 10px;\n    color: ",";\n    background-color : "," ;\n    &:hover{\n        background-color : "," ;\n    }\n    span{\n        font-size : 1.4em;\n    }\n"])),(function(e){return e.$disabled,"white"}),(function(e){return e.$disabled?"#EFEFF0":e.$color}),(function(e){return e.$disabled?"#EFEFF0":e.$color})))},2024:function(e,t,n){"use strict";n.r(t);var i=n(6),c=n.n(i),a=n(11),r=n(13),s=n(23),u=n(5),o=n(0),d=n(77),f=n(12),l=n(9),b=n(638),j=n(14),g=n(30),O=n(1413),p=n(278),_=n(293),v=n(405),h=n(658),x=n(1);t.default=function(e){var t=Object(f.c)(),n=Object(f.d)((function(e){return e.digitalsign})),i=Object(f.d)((function(e){return e.user})),m=Object(g.b)(),w=m.pushHistory,E=m.back,k=Object(o.useState)(""),C=Object(u.a)(k,2),S=C[0],y=C[1],$=Object(o.useState)(!1),F=Object(u.a)($,2),T=F[0],B=F[1],A=Object(o.useState)(!1),q=Object(u.a)(A,2),I=q[0],L=q[1],M=Object(o.useState)(!1),P=Object(u.a)(M,2),z=P[0],D=P[1],H=Object(o.useState)(!1),R=Object(u.a)(H,2),J=R[0],X=R[1],Y=Object(o.useState)(!1),G=Object(u.a)(Y,2),K=G[0],N=G[1],Q=Object(o.useState)(""),U=Object(u.a)(Q,2),V=U[0],W=U[1],Z=Object(d.i)().id,ee=Object(o.useState)([]),te=Object(u.a)(ee,2),ne=te[0],ie=te[1],ce=Object(o.useState)([]),ae=Object(u.a)(ce,2),re=ae[0],se=ae[1],ue=Object(o.useState)(!1),oe=Object(u.a)(ue,2),de=oe[0],fe=oe[1],le=Object(o.useState)(!1),be=Object(u.a)(le,2),je=be[0],ge=be[1],Oe=Object(o.useState)(!1),pe=Object(u.a)(Oe,2),_e=pe[0],ve=pe[1],he=Object(o.useState)(!1),xe=Object(u.a)(he,2),me=xe[0],we=xe[1],Ee=Object(o.useState)(""),ke=Object(u.a)(Ee,2),Ce=ke[0],Se=ke[1],ye=Object(o.useState)(""),$e=Object(u.a)(ye,2),Fe=$e[0],Te=$e[1],Be=Object(o.useState)(""),Ae=Object(u.a)(Be,2),qe=Ae[0],Ie=Ae[1],Le=Object(o.useState)(""),Me=Object(u.a)(Le,2),Pe=Me[0],ze=Me[1],De=Object(o.useState)(!1),He=Object(u.a)(De,2),Re=He[0],Je=He[1],Xe=Object(o.useState)(!1),Ye=Object(u.a)(Xe,2),Ge=Ye[0],Ke=Ye[1],Ne=Object(o.useState)(!1),Qe=Object(u.a)(Ne,2),Ue=Qe[0],Ve=Qe[1],We=Object(o.useState)([]),Ze=Object(u.a)(We,2),et=Ze[0],tt=Ze[1],nt=Object(o.useState)(!1),it=Object(u.a)(nt,2),ct=it[0],at=it[1];Object(o.useEffect)((function(){Z&&"number"==typeof parseInt(Z)?t(Object(l.qh)(Z)):E(),t(Object(l.Y)(!0))}),[]),Object(o.useEffect)((function(){if(T&&Re){var e=S,i=Fe,c=qe;0==e.length&&(e=n.sign_data.html),Ge?setTimeout((function(){var e,t,n,i,c=document.head.innerHTML,a=window.open("","1429893142534","width=1080px,height=1528,toolbar=0,menubar=0,location=0,status=0,scrollbars=1,resizable=0,left=0,top=0");null===a||void 0===a||a.document.write(c),null===a||void 0===a||a.document.write('<div class="form_wrapper overflowAuto">'.concat(Pe,'<img src="').concat(Ge,'" /></div>')),null===a||void 0===a||a.document.close(),null===a||void 0===a||null===(e=a.document.getElementById("pdf"))||void 0===e||e.addEventListener("click",(function(){jt()})),null===a||void 0===a||null===(t=a.document.getElementById("close"))||void 0===t||t.addEventListener("click",(function(){null===a||void 0===a||a.close()})),null===a||void 0===a||null===(n=a.document.getElementById("btnPDF"))||void 0===n||n.setAttribute("src",_.a),null===a||void 0===a||null===(i=a.document.getElementById("btnClose"))||void 0===i||i.setAttribute("src",v.a)}),1e3):Ue&&t(Object(l.id)(n.sign_data.id,e,i,c,V)),Ke(null),B(!1),fe(!1),Ve(!1),Je(!1)}}),[Ce]),Object(o.useEffect)((function(){n.sign_data&&(y(n.sign_data.html),B(!0),setTimeout((function(){Je(!0),setTimeout((function(){Je(!1),setTimeout((function(){B(!1)}),1e3)}),500)}),3e3))}),[n.sign_data]),Object(o.useEffect)((function(){if(n.sign_line){var e,t=null,c=Object(s.a)(n.sign_line);try{for(c.s();!(e=c.n()).done;){var a=e.value;if(a.user_id==i.id){if("3"!=a.state&&"4"!=a.state||ge(!0),"8"==a.state||"9"==a.state)return ve(!0);"2"==a.state&&(ge(!1),null==t&&(t=!0))}else"2"!=a.state&&"7"!=a.state||null!=t||(t=!1)}}catch(r){c.e(r)}finally{c.f()}we(!!t)}}),[n.sign_line]),Object(o.useEffect)((function(){n.sign_refer&&se(n.sign_refer)}),[n.sign_refer]),Object(o.useEffect)((function(){n.sign_files&&tt(Object(r.a)(n.sign_files))}),[n.sign_files]),Object(o.useEffect)((function(){n.approval_sign_fin&&(t(Object(l.nc)()),setTimeout((function(){B(!1),Object(j.j)("\uacb0\uc7ac \uc644\ub8cc."),E()}),2e3))}),[n.approval_sign_fin]),Object(o.useEffect)((function(){n.edit_sign_fin&&(t(Object(l.nc)()),B(!1),Object(j.j)("\uc218\uc815 \uc644\ub8cc."),t(Object(l.qh)(n.sign_data.id)))}),[n.edit_sign_fin]),Object(o.useEffect)((function(){n.reject_sign_fin&&(t(Object(l.nc)()),setTimeout((function(){B(!1),Object(j.j)("\uacb0\uc7ac \ubc18\ub824."),E()}),2e3))}),[n.reject_sign_fin]),Object(o.useEffect)((function(){n.cancel_sign_fin&&(t(Object(l.nc)()),setTimeout((function(){B(!1),Object(j.j)("\uacb0\uc7ac \ucde8\uc18c."),E()}),2e3))}),[n.cancel_sign_fin]),Object(o.useEffect)((function(){n.re_request_sign_fin&&(t(Object(l.nc)()),setTimeout((function(){B(!1),Object(j.j)("\uc7ac\uc0c1\uc2e0 \uc644\ub8cc"),w("/fbtemporary")}),2e3))}),[n.re_request_sign_fin]);var rt=function(){var e=Object(a.a)(c.a.mark((function e(a,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.id!=n.sign_data.user_id){e.next=2;break}return e.abrupt("return");case 2:if(L(!1),B(!0),setTimeout((function(){B(!1)}),5e3),!r){e.next=10;break}return e.next=8,t(Object(l.mi)(n.sign_data.id,a||""));case 8:e.next=12;break;case 10:return e.next=12,t(Object(l.h)(n.sign_data.id,a||""));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),st=function(){var e=Object(a.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.id!=n.sign_data.user_id){e.next=2;break}return e.abrupt("return");case 2:return D(!1),e.next=5,t(Object(l.Mi)(n.sign_data.id,a));case 5:B(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=Object(a.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.id==n.signed_user[0].id){e.next=2;break}return e.abrupt("return");case 2:return X(!1),e.next=5,t(Object(l.X)(n.sign_data.id,a,n.signed_user[0].state));case 5:B(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(t),N(!1),B(!0),fe(!1),Ve(!0),Je(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,t(Object(l.Hi)(n.sign_data.id));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de?N(!0):fe(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bt=function(e){3!=n.signed_user[0].state&&1!=n.signed_user[0].state||4!=e||X(!0),3==e&&lt(),5==e&&ft(),void 0==n.sign_data||i.id==n.sign_data.user_id||de||(1==e?D(!0):2==e&&L(!0))},jt=function(){at(!0)},gt=je||_e||void 0==n.sign_data||i.id==n.sign_data.user_id||"4"==n.sign_data.sign_state||de||!me,Ot=(je||_e||void 0==n.sign_data||i.id==n.sign_data.user_id||"4"==n.sign_data.sign_state||n.sign_data.is_regist,void 0==n.sign_data||void 0==n.signed_user||"4"==n.sign_data.sign_state||i.id!=n.sign_data.user_id||i.id!=n.signed_user[0].id);return Object(x.jsxs)(O.b,{children:[Object(x.jsx)(b.Db,{onClose:function(){return N(!1)},onComplete:dt,visible:K}),Object(x.jsx)(b.e,{visible:z,onClose:function(){return D(!1)},onComplete:st}),Object(x.jsx)(b.c,{visible:I,onClose:function(){return L(!1)},onComplete:rt}),Object(x.jsx)(h.a,{visible:J,onClose:function(){return X(!1)},onComplete:ut}),Object(x.jsx)(j.g,{open:T}),Object(x.jsxs)(O.a,{$isMain:!0,children:[Object(x.jsx)(O.f,{children:Object(x.jsx)(b.m,{html:Ce,onClickCancel:ot,onClickSignCancel:function(){return X(!0)},onChangeSignLine:function(e){return ie(e)},onClickEdit:lt,onClickPreview:function(e){Ke(e),B(!0),Je(!0)},isPDF:ct,isEditMode:de,activePDF:!0,activeEdit:!0,activePreview:!0,activeSignCancel:!0})}),Object(x.jsx)(O.d,{children:Object(x.jsx)(b.l,{onChangeContent:function(e){return y(t=e),void Se(Fe+t+qe);var t},formId:n.new_form_id,html:n.sign_data?n.sign_data.html:"",disableEdit:!de,isRegist:!(!n.sign_data||!n.sign_data.is_regist),isSignwait:!!n.sign_data,AddSign:function(e,t,n,i){Se(t+e+n),Te(t),Ie(n),ze(i||"")},isHtmlFlag:Re})}),Object(x.jsxs)(O.e,{children:[Object(x.jsxs)(O.g,{children:[Object(x.jsxs)("div",{children:["\ucca8\ubd80\ud30c\uc77c ",et.length,"\uac1c"]}),(null===et||void 0===et?void 0:et.length)>0&&et.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:p.a}),Object(x.jsx)("a",{href:e.url,target:"_blank",download:e.filename,children:e.filename})]},t)}))]}),Object(x.jsx)(O.c,{$color:"#3E8A8B",$disabled:Ot,onClick:function(){return Ot?null:bt(4)},children:"\uacb0\uc7ac\ucde8\uc18c"}),n.sign_data&&4==n.sign_data.sign_state&&n.sign_data.user_id==i.id&&0==n.sign_data.is_re_request?Object(x.jsx)(O.c,{$color:"#3E8A8B",onClick:function(){return bt(5)},children:"\uc7ac\uc0c1\uc2e0"}):Object(x.jsx)(O.c,{$color:"#3E8A8B",$disabled:gt,onClick:function(){return gt?null:bt(1)},children:"\ubc18\ub824"}),Object(x.jsx)(O.c,{$color:"#EB5539",$disabled:gt,onClick:function(){return gt?null:bt(2)},children:"\uacb0\uc7ac"})]})]}),Object(x.jsx)(O.a,{$isMain:!1,children:Object(x.jsx)(b.o,{signLines:ne,signRefers:re,isRequested:!0})})]})}}}]);